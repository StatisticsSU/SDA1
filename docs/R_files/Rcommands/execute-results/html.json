{
  "hash": "586a1e0df1311bdb271a01f4b2f0b1dc",
  "result": {
    "markdown": "---\ntitle: \"R commands for SDA1\"\nauthor: \"Mattias Villani\"\nformat: html\n---\n\n\n> This document gives some useful R commands for the basic stats course SDA1 using the `mosaic` and `ggformula` packages using the R formula syntax.\n\n## Credits\n\nThis document is adapted from Professor Mcnamara's *All the R you need for STAT 220 - formula*.\n\n## Loading packages\n\nLoading two packages for formula based basic statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mosaic)\nlibrary(ggformula)\n```\n:::\n\n\n## Reading in data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nGSS <- read.csv(\"GSS_clean.csv\")\n```\n:::\n\n\n## Plotting\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# one categorical\ngf_bar(~marital_status, data = GSS)\n```\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# two categorical\ngf_bar(~marital_status, fill = ~born_in_us, data = GSS)\n```\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_bar(~marital_status, fill = ~born_in_us, data = GSS, position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# one numeric\ngf_histogram(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 3 rows containing non-finite values (`stat_bin()`).\n```\n:::\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-4.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_boxplot(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 3 rows containing non-finite values (`stat_boxplot()`).\n```\n:::\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-5.png){width=672}\n:::\n\n```{.r .cell-code}\n# one numeric, one categorical\ngf_boxplot(highest_year_of_school_completed ~ labor_force_status, data = GSS)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 3 rows containing non-finite values (`stat_boxplot()`).\n```\n:::\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-6.png){width=672}\n:::\n\n```{.r .cell-code}\n# two numeric\ngf_point(highest_year_of_school_completed ~ highest_year_school_completed_spouse,\n  data = GSS\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 1361 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output-display}\n![](Rcommands_files/figure-html/unnamed-chunk-3-7.png){width=672}\n:::\n:::\n\n\n## Summary statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# one categorical\ntally(~marital_status, data = GSS, format = \"proportion\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nmarital_status\n     Divorced       Married Never married     Separated       Widowed \n 0.1716354344  0.4250425894  0.2853492334  0.0319420784  0.0851788756 \n         <NA> \n 0.0008517888 \n```\n:::\n\n```{.r .cell-code}\n# two categorical\ntally(~ marital_status | general_happiness, data = GSS, format = \"proportion\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n               general_happiness\nmarital_status  Not too happy Pretty happy   Very happy         <NA>\n  Divorced       0.2500000000 0.1851568477 0.1098430813 0.0000000000\n  Married        0.1815476190 0.3856159143 0.6162624822 0.2500000000\n  Never married  0.4017857143 0.3129303749 0.1768901569 0.5000000000\n  Separated      0.0565476190 0.0306044376 0.0213980029 0.2500000000\n  Widowed        0.1101190476 0.0849273145 0.0741797432 0.0000000000\n  <NA>           0.0000000000 0.0007651109 0.0014265335 0.0000000000\n```\n:::\n\n```{.r .cell-code}\n# one numeric\nmean(~highest_year_of_school_completed, data = GSS, na.rm = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 13.73177\n```\n:::\n\n```{.r .cell-code}\noptions(na.rm = TRUE) # options\nmedian(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 14\n```\n:::\n\n```{.r .cell-code}\nsd(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2.974313\n```\n:::\n\n```{.r .cell-code}\nrange(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1]  0 20\n```\n:::\n\n```{.r .cell-code}\nIQR(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 4\n```\n:::\n\n```{.r .cell-code}\nfivenum(~highest_year_of_school_completed, data = GSS)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1]  0 12 14 16 20\n```\n:::\n\n```{.r .cell-code}\nfavstats(~highest_year_of_school_completed, data = GSS) # favorite statistics\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n min Q1 median Q3 max     mean       sd    n missing\n   0 12     14 16  20 13.73177 2.974313 2345       3\n```\n:::\n\n```{.r .cell-code}\ncor(highest_year_of_school_completed ~ highest_year_school_completed_spouse,\n  data = GSS, use = \"complete.obs\"\n) # correlation\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.5955573\n```\n:::\n:::\n\n\n## Working with data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# filtering out NA values\nGSS_prop <- filter(\n  GSS,\n  !is.na(should_marijuana_be_made_legal),\n  !is.na(self_emp_or_works_for_somebody)\n)\n```\n:::\n\n\n## Modeling and inference\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# linear model\nm1 <- lm(highest_year_of_school_completed ~ highest_year_school_completed_spouse,\n  data = GSS\n)\nsummary(m1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = highest_year_of_school_completed ~ highest_year_school_completed_spouse, \n    data = GSS)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-16.5400  -1.3519   0.0242   1.4600   7.0242 \n\nCoefficients:\n                                     Estimate Std. Error t value Pr(>|t|)    \n(Intercept)                           5.84740    0.36316   16.10   <2e-16 ***\nhighest_year_school_completed_spouse  0.59403    0.02553   23.27   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.462 on 985 degrees of freedom\n  (1361 observations deleted due to missingness)\nMultiple R-squared:  0.3547,\tAdjusted R-squared:  0.354 \nF-statistic: 541.4 on 1 and 985 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nrsquared(m1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.3546884\n```\n:::\n\n```{.r .cell-code}\npredict(m1,\n  newdata = data.frame(highest_year_school_completed_spouse = 11),\n  interval = \"confidence\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       fit      lwr      upr\n1 12.38178 12.17059 12.59297\n```\n:::\n\n```{.r .cell-code}\npredict(m1,\n  newdata = data.frame(highest_year_school_completed_spouse = 11),\n  interval = \"prediction\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       fit      lwr      upr\n1 12.38178 7.546498 17.21706\n```\n:::\n\n```{.r .cell-code}\n# bootstrapping\nbootstrap_sample <- do(1) * resample(GSS)\nboot <- do(1000) * mean(~highest_year_of_school_completed, data = resample(GSS))\nconfint(boot)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  name    lower    upper level     method estimate\n1 mean 13.61371 13.85108  0.95 percentile 13.73177\n```\n:::\n\n```{.r .cell-code}\n# one proportion\nprop.test(~self_emp_or_works_for_somebody,\n  data = GSS, success = \"Self-employed\", p = 0.1, alternative = \"less\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\t1-sample proportions test with continuity correction\n\ndata:  GSS$self_emp_or_works_for_somebody  [with success = Self-employed]\nX-squared = 0.1433, df = 1, p-value = 0.6475\nalternative hypothesis: true p is less than 0.1\n95 percent confidence interval:\n 0.0000000 0.1138167\nsample estimates:\n        p \n0.1026095 \n```\n:::\n\n```{.r .cell-code}\n# two proportions\nprop.test(should_marijuana_be_made_legal ~ self_emp_or_works_for_somebody,\n  data = GSS_prop, success = \"Legal\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\t2-sample test for equality of proportions with continuity correction\n\ndata:  tally(should_marijuana_be_made_legal ~ self_emp_or_works_for_somebody)\nX-squared = 0.87754, df = 1, p-value = 0.3489\nalternative hypothesis: two.sided\n95 percent confidence interval:\n -0.04100264  0.12791902\nsample estimates:\n   prop 1    prop 2 \n0.6901408 0.6466827 \n```\n:::\n\n```{.r .cell-code}\n# one mean\nt.test(~highest_year_of_school_completed, data = GSS, mu = 12, alternative = \"greater\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tOne Sample t-test\n\ndata:  highest_year_of_school_completed\nt = 28.195, df = 2344, p-value < 2.2e-16\nalternative hypothesis: true mean is greater than 12\n95 percent confidence interval:\n 13.6307     Inf\nsample estimates:\nmean of x \n 13.73177 \n```\n:::\n\n```{.r .cell-code}\n# two means\nt.test(highest_year_of_school_completed ~ born_in_us, data = GSS)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tWelch Two Sample t-test\n\ndata:  highest_year_of_school_completed by born_in_us\nt = -4.8468, df = 337.79, p-value = 1.916e-06\nalternative hypothesis: true difference in means between group No and group Yes is not equal to 0\n95 percent confidence interval:\n -1.7012965 -0.7190416\nsample estimates:\n mean in group No mean in group Yes \n         12.67774          13.88791 \n```\n:::\n\n```{.r .cell-code}\n# Chi-square\nchisq.test(tally(marital_status ~ general_happiness, data = GSS)) # independence\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in chisq.test(tally(marital_status ~ general_happiness, data = GSS)):\nChi-squared approximation may be incorrect\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's Chi-squared test\n\ndata:  tally(marital_status ~ general_happiness, data = GSS)\nX-squared = 210.13, df = 15, p-value < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nchisq.test(tally(~general_happiness, data = GSS), p = c(0.14, 0.55, 0.30, 0.01)) # GoF\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tChi-squared test for given probabilities\n\ndata:  tally(~general_happiness, data = GSS)\nX-squared = 16.528, df = 3, p-value = 0.0008838\n```\n:::\n:::\n\n\n## Probability\n\n\n::: {.cell}\n\n```{.r .cell-code}\npnorm(1.96, lower.tail = FALSE) # normal distribution function\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.0249979\n```\n:::\n\n```{.r .cell-code}\nqnorm(0.25, mean = 100, sd = 5) # normal quantile function\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 96.62755\n```\n:::\n:::\n",
    "supporting": [
      "Rcommands_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}