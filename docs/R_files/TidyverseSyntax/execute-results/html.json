{
  "hash": "130b5a89705e384d5b861d9d36238a6a",
  "result": {
    "markdown": "---\ntitle: \"Tidyverse syntax\"\nauthor: \"Mattias Villani\"\nformat: html\n---\n\n\n> Den här sidan samlar lite kommandon i den s k **tidyverse** ![](../misc/hexagons/figs/tidyverse_hexagon.svg){fig-align=\"center\" width=\"25\"} dialekten av R.\n\n## Introduktion\n\n\n::: {.cell}\n\n:::\n\n\n[Tidyverse](https://www.tidyverse.org/) är en samling R-paket som delar på samma underliggande filosofi. När man väl lärt sig Tidyverse-filosofin, är paketen väldigt kraftfulla. Men eftersom det tar sin tid att lära sig Tidyverse så använder vi inte dessa paket på den här grundkursen. För att stilla nyfikenheten bland programmeringintresserade studenter kommer vi då och då länka till motsvarande kod i Tidyverse genom att visa den här ikonen i marginalen:\n\n![](../misc/hexagons/figs/tidyverse_hexagon.svg){fig-align=\"center\" width=\"60\"}\n\nKlickar man på den ikonen får man se motsvarande kod från ett eller flera av de olika Tidyverse-paketen, t ex\n\n![](/misc/hexagons/figs/tidyhexa.svg){fig-align=\"center\" width=\"200\"}\n\nSpeciellt värt att notera bland dessa paket är [ggplot2](https://ggplot2.tidyverse.org/) som, trots sitt knepiga namn, är ett mycket användbart paket för diagram och visualisering.\nSe [ggplot2 cheat sheet](https://posit.co/wp-content/uploads/2022/10/data-visualization-1.pdf) för kommandon.\n\nDen s k `pipe`-operatorn `%>%` gör att Tidyverse-kod byggs upp på annats sätt än standard R. Pipe-operatorn skickar vidare en beräkning eller resultat till funktionen till höger i uttrycket. Ett exempel förklarar det bäst:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressMessages(library(tidyverse))\ntitanic %>% group_by(Survived)  %>% tally()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Survived     n\n  <chr>    <int>\n1 Alive      712\n2 Dead      1496\n```\n:::\n:::\n\n där datamaterialet (dataframe) `titanic` skickas in i funktionen `group_by()` som grupperar data efter variablen Survived. Denna gruppering skickas sen vidare till funktioen `tally()` som gör sammanfattningen till en tabell. \n\n## Scatter plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot(data = mtcars, aes(x = hp, y = mpg)) +\n  geom_point() + \n  ggtitle(\"Cars fuel usage\") \n```\n\n::: {.cell-output-display}\n![](TidyverseSyntax_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Tabeller\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressMessages(library(tidyverse))\ntitanic %>% dplyr::group_by(Survived) %>% tally()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  Survived     n\n  <chr>    <int>\n1 Alive      712\n2 Dead      1496\n```\n:::\n:::\n\n\neller om man vill också ha proportioner\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressMessages(library(tidyverse))\ntitanic %>% \n  dplyr::group_by(Survived)  %>% \n  tally() %>% \n  mutate(freq = prop.table(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 3\n  Survived     n  freq\n  <chr>    <int> <dbl>\n1 Alive      712 0.322\n2 Dead      1496 0.678\n```\n:::\n:::\n\ndär vi skrivit våra pipes `%>%` enligt tidyverse-konventionen med radbryt mellan en lång serie pipes. \n\n## Stapeldiagram\n\n#### Antal\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\ntitanic %>% \n  group_by(Survived)  %>% \n  tally() %>% \n  ggplot(aes(x = Survived, y = n)) +\n  geom_bar(stat = \"identity\") +\n  ylab(\"proportion\")\n```\n\n::: {.cell-output-display}\n![](TidyverseSyntax_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "TidyverseSyntax_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}